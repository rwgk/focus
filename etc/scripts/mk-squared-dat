#! /bin/csh -f

set progn = "$0"
set progn = "$progn:t"

if ($#argv != 5) then
  echo 'usage: '"$progn"' GridX GridY GridZ Boostr nCycles'
  exit 1
endif

set noglob

set GridX   = "$1"
set GridY   = "$2"
set GridZ   = "$3"
set Boostr  = "$4"
set nCycles = "$5"


cat << EOT
COMPID ZAP
RESET LMAX 10000000


EOT

echo ': Generated by '"$progn"
echo ': Command: '"$0 $*"
echo ': '"`date`"
echo ''
echo ''


set iC = 1

while ($iC <= $nCycles)

set Divide="DIVIDE"
if ($iC == $nCycles) then
  set Divide="DIVIDE PR"
endif

cat << EOT
TITLE CYCLE $iC
FOURR  PATT 
COEFF  1304 1304  -1  0  -1  -1  0  0  0
GRID  $GridX $GridY $GridZ
LAYOUT  ACROSS DOWN LAYER  $GridX $GridY $GridZ  0 0 0  1 1 1
END
SHAPE
SQUAR
END
COPYBDF  SHA MAP
RFOURR
END
$Divide
BOOSTR  $Boostr
DIVPAT
END

EOT

  @ iC++

end

echo ""
echo FINISH

exit 0
